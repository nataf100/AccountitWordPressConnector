# מדריך למשתמש - Woo AccountIT Connector

## מה חדש בגרסה 1.60?

בגרסה זו נוספה גמישות רבה יותר לתהליך הפקת המסמכים, עם תמיכה בהפקה ידנית יזומה.

### פיצ'רים חדשים:
1.  **מצב הפעלה ידני (Manual Trigger Mode):** אפשרות לנטרל את ההפקה האוטומטית המבוססת על סטטוס ההזמנה.
2.  **כפתור הפקה ידנית (Issue Invoice Button):** כפתור חדש המופיע ברשימת ההזמנות ומאפשר להפיק מסמך בלחיצת כפתור עבור הזמנה ספציפית.

3.  **סנכרון מלאי (Inventory Sync):** אפשרויות מתקדמות לסנכרון פריטים ומלאי בין WooCommerce ל-AccountIT.

---

## סנכרון מלאי (Inventory Synchronization)

גרסה 1.60 מציגה לשונית חדשה בהגדרות: **Import/Export**.

### ייבוא פריטים מ-AccountIT (Import)
ניתן לייבא פריטים מ-AccountIT ל-WooCommerce בשני אופנים:
*   **Full Sync:** ייבוא כל הפריטים מ-AccountIT.
*   **Partial Sync:** ייבוא פריטים חדשים בלבד.

### ייצוא מוצרים ל-AccountIT (Export)
ניתן לייצא את כל מוצרי WooCommerce לקובץ CSV בפורמט התואם ל-AccountIT, לצורך הקמה מהירה של קטלוג הפריטים במערכת הנהלת החשבונות.

### עדכון מלאי בעת הזמנה
בלשונית **API Settings**, תחת **Update Inventory**, ניתן להגדיר כיצד המערכת תנהג בעת ביצוע הזמנה:
*   **Do not update:** לא יבוצע עדכון מלאי ב-AccountIT.
*   **Update AccountIT inventory:** המלאי ב-AccountIT יעודכן בהתאם להזמנה (חובה שהמק"ט/SKU יהיה זהה בשתי המערכות).
*   **Update... and add new items:** עדכון מלאי, ואם הפריט לא קיים ב-AccountIT - הוא ייווצר אוטומטית.

---

## הוראות שימוש

### הגדרת מצב ידני
כדי לעבור לעבודה במצב ידני:
1.  היכנס לממשק הניהול של וורדפרס -> Woo AccountIT Connector -> הגדרות (Settings).
2.  אתר את השדה **Activation Trigger**.
3.  בחר באפשרות **Manual**.
4.  לחץ על **Save Data** לשמירת השינויים.

### הפקת מסמך באופן ידני
כאשר המערכת מוגדרת למצב ידני:
1.  גש למסך ההזמנות של WooCommerce (WooCommerce -> Orders).
2.  בעמודה **Invoice Receipt #** (מספר חשבונית/קבלה), עבור הזמנות שטרם הופק עבורן מסמך, יופיע כפתור **Issue Invoice**.
3.  לחץ על הכפתור. תופיע הודעת אישור בדפדפן.
4.  לאחר האישור, המערכת תתקשר עם AccountIT ותפיק את המסמך.
5.  בסיום מוצלח, העמוד יתרענן והכפתור יוחלף במספר המסמך שהופק.

---

## מקרים ותהליכים נוספים (Cases & Usage)

### מניעת כפילויות
*   הכפתור **Issue Invoice** מוצג **רק** אם טרם הופק מסמך עבור ההזמנה (כלומר, אין מספר מסמך שמור במערכת).
*   לאחר לחיצה על הכפתור, הוא הופך ללא פעיל (Disabled) עד לקבלת תשובה מהשרת, כדי למנוע לחיצות כפולות.

### טיפול בשגיאות
*   אם הפקת המסמך נכשלה (למשל: פרטי התחברות שגויים, בעיית תקשורת, או נתונים חסרים בהזמנה), תופיע הודעת שגיאה אדומה לצד הכפתור.
*   במקרה כזה, ניתן לנסות שוב לאחר תיקון הבעיה.

### מעבר בין מצבים (אוטומטי / ידני)
*   **מעבר מאוטומטי לידני:** הפקה אוטומטית תופסק מיידית. הזמנות קיימות שלא הופקו - ניתן יהיה להפיק להן מסמך באמצעות הכפתור הידני.
*   **מעבר מידני לאוטומטי:** הזמנות חדשות יופקו אוטומטית בהתאם לסטטוס. הזמנות ישנות שלא הופקו - יופקו רק אם תשנה את הסטטוס שלהן לסטטוס המוגדר כטריגר (למשל מ-Processing ל-Completed).

### סוגי מסמכים
הכפתור הידני מכבד את הגדרת **Generated Document Type** (חשבונית מס / קבלה / חשבונית מס קבלה). המסמך שיפוק יהיה זהה לזה שהיה מופק באופן אוטומטי.
